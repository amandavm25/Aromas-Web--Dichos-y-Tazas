<div class="modal fade admin-modal modal-olive" id="modalDetallesAsistencia">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <!-- Header -->
            <div class="modal-header">
                <h5 class="modal-title">
                    <div class="modal-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    Detalles de Asistencia
                </h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <!-- Body -->
            <div class="modal-body">

                <!-- Información del Empleado -->
                <div class="modal-entity-header entity-block">
                    <h5 id="detalleNombre" class="modal-entity-name"></h5>
                    <div class="modal-entity-meta">
                        <div class="modal-entity-meta-item">
                            <small>Identificación:</small>
                            <p id="detalleIdentificacion"></p>
                        </div>
                        <div class="modal-entity-meta-item">
                            <small>Cargo:</small>
                            <p id="detalleCargo"></p>
                        </div>
                    </div>
                </div>

                <!-- Información de Fecha -->
                <div class="modal-data-grid-3">
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-calendar-day"></i> Fecha
                        </label>
                        <p id="detalleFecha" class="modal-data-value"></p>
                    </div>
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-calendar-week"></i> Día
                        </label>
                        <p id="detalleDia" class="modal-data-value"></p>
                    </div>
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-toggle-on"></i> Estado
                        </label>
                        <div id="detalleEstado"></div>
                    </div>
                </div>

                <!-- Horario -->
                <h6 class="modal-subsection-title">
                    <i class="fas fa-clock"></i> Horario
                </h6>
                <div class="modal-data-grid-3">
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-sign-in-alt"></i> Entrada
                        </label>
                        <p id="detalleEntrada" class="modal-data-value"></p>
                    </div>
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-sign-out-alt"></i> Salida
                        </label>
                        <p id="detalleSalida" class="modal-data-value"></p>
                    </div>
                    <div class="modal-data-cell">
                        <label class="modal-data-label">
                            <i class="fas fa-utensils"></i> Almuerzo
                        </label>
                        <p id="detalleAlmuerzo" class="modal-data-value"></p>
                    </div>
                </div>

                <!-- Resumen de Horas -->
                <h6 class="modal-subsection-title">
                    <i class="fas fa-hourglass-half"></i> Horas Trabajadas
                </h6>
                <div class="modal-summary">
                    <div class="modal-summary-grid">
                        <div>
                            <label class="modal-summary-label">
                                <i class="fas fa-clock"></i> Horas Totales
                            </label>
                            <p id="detalleHorasTotales" class="modal-summary-value summary-extra"></p>
                        </div>
                        <div>
                            <label class="modal-summary-label">
                                <i class="fas fa-business-time"></i> Regulares
                            </label>
                            <p id="detalleHorasRegulares" class="modal-summary-value summary-total"></p>
                        </div>
                        <div>
                            <label class="modal-summary-label">
                                <i class="fas fa-star"></i> Extras
                            </label>
                            <p id="detalleHorasExtras" class="modal-summary-value"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <span><i class="fas fa-times"></i> Cerrar</span>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const botonesDetalles = document.querySelectorAll('.btn-detalles-asistencia');

        botonesDetalles.forEach(boton => {
            boton.addEventListener('click', function () {
                const nombre = this.getAttribute('data-nombre');
                const identificacion = this.getAttribute('data-identificacion');
                const cargo = this.getAttribute('data-cargo');
                const fecha = this.getAttribute('data-fecha');
                const dia = this.getAttribute('data-dia');
                const entrada = this.getAttribute('data-entrada');
                const salida = this.getAttribute('data-salida');
                const almuerzo = this.getAttribute('data-almuerzo');
                const horasTotales = this.getAttribute('data-horastotales');
                const horasRegulares = this.getAttribute('data-horasregulares');
                const horasExtras = this.getAttribute('data-horasextras');
                const estado = this.getAttribute('data-estado');

                document.getElementById('detalleNombre').textContent = nombre;
                document.getElementById('detalleIdentificacion').textContent = identificacion;
                document.getElementById('detalleCargo').textContent = cargo;
                document.getElementById('detalleFecha').textContent = fecha;
                document.getElementById('detalleDia').textContent = dia.charAt(0).toUpperCase() + dia.slice(1);
                document.getElementById('detalleEntrada').textContent = entrada;
                document.getElementById('detalleSalida').textContent = salida;
                document.getElementById('detalleAlmuerzo').textContent = almuerzo;
                document.getElementById('detalleHorasTotales').textContent = horasTotales;
                document.getElementById('detalleHorasRegulares').textContent = horasRegulares + ' h';

                // Horas extras: color dorado si positivo, gris si 0
                const horasExtrasEl = document.getElementById('detalleHorasExtras');
                const horasExtrasNum = parseFloat(horasExtras);
                horasExtrasEl.textContent = horasExtras + ' h';
                horasExtrasEl.className = 'modal-summary-value' + (horasExtrasNum > 0 ? ' summary-extra' : '');

                // Badge de estado
                const estadoColor = estado === 'Completo' ? 'var(--green)' : 'var(--gold-bright)';
                document.getElementById('detalleEstado').innerHTML =
                    `<span style="background:${estadoColor};color:var(--white);padding:0.4rem 1rem;border-radius:20px;font-size:0.85rem;font-weight:600;display:inline-block;">${estado}</span>`;
            });
        });
    });
</script>